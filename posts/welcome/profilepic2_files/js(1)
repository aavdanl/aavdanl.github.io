(function(w) {
  function io(t){return"[object Object]"===Object.prototype.toString.call(t)}  function stringify(n){var r=function n(r){if(!io(r))return"";var i=[];return Object.keys(r).forEach((function(t){var u=r[t];if(io(u)){var o=n(u).map((function(n){return[-1!==n[0].indexOf("[")?n[0].replace(/^([^\[]+)(.*)$/,(function(n,r,i){return t+"["+r+"]"+i})):t+"["+n[0]+"]",n[1]]}));i.push.apply(i,o)}else Array.isArray(u)?u.forEach((function(r){var u={};u[t]=r,i.push.apply(i,n(u))})):null!=u?i.push([t,u.toString()]):i.push([t])})),i}(n).map((function(n){return n.map(encodeURIComponent).join("=")})).join("&");return r?"?"+r:r}  function parse(n){return n.replace(/^\??/,"").split("&").map((function(n){return n.split("=").map(decodeURIComponent)})).reduce((function(n,e){if(e[0]){var r=void 0===e[1]?null:r;n[e[0]]=r}return n}),{})}  function gen(){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",t=n.length,a=0;a<32;a++)r+=n.charAt(Math.floor(Math.random()*t));return r}  function init(e,t){var n,a=e.document,i=e.weplayed=e.weplayed||{},o={},r=[],d=!1,s=Array.prototype.slice.call(a.getElementsByTagName("SCRIPT")).filter((function(e){return 0===(e.src||"").indexOf(t+"/js")})).shift(),l=parse(s.src.replace(/^[^\?]+\??/,"")),c=gen();function p(e){(n=a.createElement("IFRAME")).style.position="absolute",n.style.left="-100px",n.style.top="-100px",n.style.width="1px",n.style.height="1px",n.src=t+"/"+c+".html"+stringify(e),a.body.appendChild(n)}function u(e,a){n.contentWindow.postMessage({id:e,params:a},t)}function f(e,t,n){o[e]&&(o[e](t,n&&new Error(n)),delete o[e])}e.addEventListener("message",(function(e){e.origin.indexOf(t)>=0&&e.data.id&&(d=!0,(e.data.json&&0!==Object.keys(e.data.json).length||e.data.error)&&f(e.data.id,e.data.json,e.data.error),r.forEach((function(e){u.apply(null,e)})),r=[])})),i.abracadabra=function(e,t,a){o[c]=t,n?d?u(c,e):r.push([c,e]):p(e),setTimeout(function(e){f(e,null,new Error(e+": Timeout"))}.bind(null,c),a||750),c=gen()},"preload"in l&&(a.body?p({}):e.addEventListener("load",(function(){p({})})))}  init(w,'https://ab.weplayed.com');
})(window);
